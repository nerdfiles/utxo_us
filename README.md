# sutton-spectre

Bitcoin Brokerage application.

This was an internal product application for [The Coinsultants](https://thecoinsultants.com/).

## Build & development

Run ``grunt`` for building and ``grunt serve`` for development.

### TL;DR

    $ python manage.py clear_cache; python manage.py runserver local.utxo.us:8000
    $ cd $HOME/Projects/antigrid; compass.ing _system/
    $ coffee.brew Gruntfile.coffee

## Connect to Remote Server

    $ sh ~/.mosh/utxo.us.sh

### Mosh File

    WF_USERNAME=root
    EXTERNAL_IP=104.131.186.39
    EXTERNAL_PORT=22
    mosh -p ${EXTERNAL_PORT} --server=/usr/bin/mosh-server "${WF_USERNAME}@${EXTERNAL_IP}"

### Rebooting Mosh Server

    $ (login to server)
    $ ps ax | grep mosh # find PID for mosh
    $ kill -9 {{PID}}
    $ nohup mosh-server &

## Install Django application

    $ mkvirtualenv HOONM5gpFswaVA_utxo_app
    $ pip install -r requirements.mature.txt

## Run Django application

    $ workon HOONM5gpFswaVA_utxo_app
    $ python manage.py clear_cache
    $ python manage.py runserver local.utxo.us:8000 # Add 127.0.0.1 host file entry.

## Build Django Front End application

    $ workon HOONM5gpFswaVA_utxo_app
    $ python manage.py collectstatic

## Work on custom grid system directly

    $ /Users/nerdfiles/Projects/sutton-spectre/app/static/bower_components/antigrid
    $ compass.ing _system

## Update Gruntfile

    $ cd /Users/nerdfiles/Projects/sutton-spectre/
    $ coffee.brew Gruntfile.coffee

## Testing

Running `grunt test` will run the unit tests with karma, generated by ``generator-angularfire``.

## Yeoman

### Add a route

    $ yo angularfire:route newRoute

New controller and HTML view will be created, but ``<script>`` in ``layout.html`` will 
not be updated. Developers must conventionally/manually update this file.

## Dependencies

1. https://blockscore.com/ (ID Verification)  
   Example: https://gist.github.com/KevinNuut/b3782e0d7f5db014516b
2. Google Places API, Geocoding API (Lookup of Nearest Western Unions)  
   Example: https://gist.github.com/nathanjohnson320/7283784
3. Twilio (SMS)  
   https://github.com/twilio/twilio-node
4. AngularJS (Application Structure)
5. Django, Django CMS (Authentication, Users, Content Management)
6. Firebase (Storage, Data Binding)
7. Grunt (Build Management)
8. Digital Ocean (Development Environment Hosting)
9. Apache (Django Serving)
10. nginx (Reverse Proxy Cache)
11. CoffeeScript (Language Sugar that Transcompiles to JavaScript)
12. Organic CSS (Presentation Layer Strategy for “Big” CSS)

## Security Model

1. Whitelist for Tor and VPNs
2. Start blacklist for VPNs
3. Add flagged by icon on backend
4. State based labels of IP addresses
5. Passwordless Login via E-mail
6. Two-factor authentication 
7. Receipt page permalink with hashed receipt URL / resend if Image ID license veirfication is resent
8. Reuploaded image
9. Upload blockchain address > dropdown
10. Upload FinSN id to row (PDF > dropbox?)
11. Blockexplorer https://blockexplorer.com/q
12. Notes section (enter address manually)
13. Hash state of map with phonenumber to reload bookmarkable URLs

## Essential readings

1. http://mkelsey.com/2013/04/30/how-i-setup-virtualenv-and-virtualenvwrapper-on-my-mac/
2. https://www.digitalocean.com/community/tutorials/how-to-use-postgresql-with-your-django-application-on-ubuntu-14-04
3. https://gist.github.com/tianhuil/0aa9b265f55413dc7198
4. https://www.digitalocean.com/community/tutorials/how-to-set-up-and-install-django-cms-on-a-debian-7-or-ubuntu-13-vps

## Needful

1. $ ps ax | ack-grep python | awk '{print $1}' | xargs kill -9
2. $ jangy.start.load 
3. $ gunicorn --bind 0.0.0.0:800N app.wsgi:application --pythonpath /root/.envs/HOONM5gpFswaVA_utxo/lib/python2.7/site-packages &

